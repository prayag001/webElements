/* ============================================================
   LOCATOR FINDER — Content Script Styles v2.0
   Professional, draggable panel with refined typography
   All classes prefixed with __lf- to avoid conflicts.
   ============================================================ */

/* ── Google Fonts ────────────────────────────────────────── */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap');

/* ── Hover Highlight ─────────────────────────────────────── */
.__lf-highlight {
    outline: 2px dashed #818cf8 !important;
    outline-offset: 2px !important;
    background-color: rgba(129, 140, 248, 0.08) !important;
    cursor: crosshair !important;
}

/* ── Selected Element ────────────────────────────────────── */
.__lf-selected {
    outline: 3px solid #34d399 !important;
    outline-offset: 2px !important;
    background-color: rgba(52, 211, 153, 0.06) !important;
    animation: __lf-flash 0.5s ease !important;
}

@keyframes __lf-flash {
    0% {
        box-shadow: 0 0 0 4px rgba(52, 211, 153, 0.4);
    }

    100% {
        box-shadow: 0 0 0 0 rgba(52, 211, 153, 0);
    }
}

/* ── Panel Container ─────────────────────────────────────── */
.__lf-panel {
    all: initial;
    position: fixed !important;
    z-index: 2147483647 !important;
    font-family: 'Inter', system-ui, -apple-system, sans-serif !important;
    font-size: 13px !important;
    line-height: 1.5 !important;
    border-radius: 14px !important;
    overflow: hidden !important;
    display: flex !important;
    flex-direction: column !important;
    width: 390px !important;
    max-height: calc(100vh - 32px) !important;
    box-shadow:
        0 24px 48px rgba(0, 0, 0, 0.35),
        0 0 0 1px rgba(255, 255, 255, 0.06),
        inset 0 1px 0 rgba(255, 255, 255, 0.04) !important;
    transition: box-shadow 0.2s ease !important;

    /* Dark theme defaults */
    --bg: #0c1017;
    --surface: #141b27;
    --hover: #1c2536;
    --input: #111827;
    --border: #1e293b;
    --text: #e2e8f0;
    --dim: #94a3b8;
    --muted: #64748b;
    --primary: #818cf8;
    --primary-bright: #a5b4fc;
    --pri-dim: rgba(129, 140, 248, 0.12);
    --green: #34d399;
    --green-dim: rgba(52, 211, 153, 0.12);
    --yellow: #fbbf24;
    --yellow-dim: rgba(251, 191, 36, 0.12);
    --orange: #fb923c;
    --orange-dim: rgba(251, 146, 60, 0.12);
    --red: #f87171;
    --red-dim: rgba(248, 113, 113, 0.12);
    --accent: #38bdf8;

    background: var(--bg) !important;
    color: var(--text) !important;

    /* Default position */
    top: 16px !important;
    right: 16px !important;
}

/* Dragging state */
.__lf-panel.__lf-dragging {
    box-shadow:
        0 32px 64px rgba(0, 0, 0, 0.5),
        0 0 0 2px var(--primary),
        inset 0 1px 0 rgba(255, 255, 255, 0.06) !important;
    opacity: 0.95 !important;
    transition: none !important;
}

/* Light theme */
.__lf-panel.__lf-light {
    --bg: #f8fafc;
    --surface: #ffffff;
    --hover: #f1f5f9;
    --input: #f1f5f9;
    --border: #e2e8f0;
    --text: #0f172a;
    --dim: #475569;
    --muted: #94a3b8;
    --primary: #6366f1;
    --primary-bright: #818cf8;
    --pri-dim: rgba(99, 102, 241, 0.08);
    --green: #10b981;
    --green-dim: rgba(16, 185, 129, 0.08);
    --yellow: #d97706;
    --yellow-dim: rgba(217, 119, 6, 0.08);
    --orange: #ea580c;
    --orange-dim: rgba(234, 88, 12, 0.08);
    --red: #dc2626;
    --red-dim: rgba(220, 38, 38, 0.08);
    --accent: #0284c7;
    box-shadow:
        0 24px 48px rgba(0, 0, 0, 0.08),
        0 0 0 1px rgba(0, 0, 0, 0.06) !important;
}

.__lf-hidden {
    display: none !important;
}

/* ── Header (Drag Handle) ───────────────────────────────── */
.__lf-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 10px 14px !important;
    background: linear-gradient(135deg, #6366f1 0%, #7c3aed 50%, #a855f7 100%) !important;
    color: #fff !important;
    flex-shrink: 0 !important;
    cursor: grab !important;
    user-select: none !important;
    -webkit-user-select: none !important;
}

.__lf-header:active {
    cursor: grabbing !important;
}

.__lf-header-left {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
}

.__lf-header-left svg {
    stroke: #fff;
    flex-shrink: 0 !important;
}

.__lf-title {
    font-size: 14px !important;
    font-weight: 700 !important;
    letter-spacing: -0.2px !important;
    color: #fff !important;
}

.__lf-drag-hint {
    font-size: 10px !important;
    color: rgba(255, 255, 255, 0.55) !important;
    font-weight: 500 !important;
    letter-spacing: 0.3px !important;
    margin-left: 2px !important;
}

.__lf-header-right {
    display: flex !important;
    gap: 4px !important;
}

/* ── Icon Buttons ────────────────────────────────────────── */
.__lf-icon-btn {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 28px !important;
    height: 28px !important;
    border: none !important;
    background: rgba(255, 255, 255, 0.12) !important;
    color: #fff !important;
    border-radius: 7px !important;
    font-size: 13px !important;
    cursor: pointer !important;
    transition: background 0.15s, transform 0.1s !important;
}

.__lf-icon-btn:hover {
    background: rgba(255, 255, 255, 0.22) !important;
    transform: scale(1.05) !important;
}

.__lf-icon-btn:active {
    transform: scale(0.95) !important;
}

/* ── Toolbar ─────────────────────────────────────────────── */
.__lf-toolbar {
    display: flex !important;
    gap: 6px !important;
    padding: 10px 14px !important;
    border-bottom: 1px solid var(--border) !important;
    flex-shrink: 0 !important;
    flex-wrap: wrap !important;
    background: var(--bg) !important;
}

.__lf-toolbar select {
    flex: 1 !important;
    min-width: 120px !important;
    padding: 7px 10px !important;
    border-radius: 7px !important;
    border: 1px solid var(--border) !important;
    background: var(--input) !important;
    color: var(--text) !important;
    font-size: 12px !important;
    font-family: 'Inter', system-ui, sans-serif !important;
    font-weight: 500 !important;
    cursor: pointer !important;
    outline: none !important;
    transition: border-color 0.15s !important;
}

.__lf-toolbar select:focus {
    border-color: var(--primary) !important;
    box-shadow: 0 0 0 2px var(--pri-dim) !important;
}

/* ── Buttons ─────────────────────────────────────────────── */
.__lf-btn {
    display: inline-flex !important;
    align-items: center !important;
    gap: 5px !important;
    padding: 7px 14px !important;
    border: none !important;
    border-radius: 7px !important;
    font-size: 12px !important;
    font-weight: 600 !important;
    font-family: 'Inter', system-ui, sans-serif !important;
    cursor: pointer !important;
    white-space: nowrap !important;
    transition: all 0.15s ease !important;
}

.__lf-btn-primary {
    background: var(--primary) !important;
    color: #fff !important;
}

.__lf-btn-primary:hover {
    background: var(--primary-bright) !important;
    transform: translateY(-1px) !important;
}

.__lf-btn-primary.__lf-active {
    background: var(--red) !important;
    animation: __lf-pulse 1.5s ease-in-out infinite !important;
}

@keyframes __lf-pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.75;
    }
}

.__lf-btn-outline {
    background: transparent !important;
    border: 1px solid var(--border) !important;
    color: var(--dim) !important;
}

.__lf-btn-outline:hover {
    background: var(--hover) !important;
    color: var(--text) !important;
    border-color: var(--muted) !important;
}

.__lf-btn-accent {
    background: linear-gradient(135deg, var(--primary), #7c3aed) !important;
    color: #fff !important;
}

.__lf-btn-accent:hover {
    filter: brightness(1.1) !important;
    transform: translateY(-1px) !important;
}

.__lf-btn:disabled {
    opacity: 0.35 !important;
    cursor: not-allowed !important;
    transform: none !important;
}

.__lf-btn-sm {
    padding: 5px 10px !important;
    font-size: 11px !important;
}

/* ── Sections ────────────────────────────────────────────── */
.__lf-section {
    padding: 10px 14px !important;
    border-bottom: 1px solid var(--border) !important;
    flex-shrink: 0 !important;
}

.__lf-section-label {
    font-size: 10px !important;
    font-weight: 700 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.8px !important;
    color: var(--muted) !important;
    margin-bottom: 6px !important;
}

.__lf-section-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 8px 14px 4px !important;
    flex-shrink: 0 !important;
}

.__lf-code-block {
    font-family: 'JetBrains Mono', 'Fira Code', Consolas, monospace !important;
    font-size: 11.5px !important;
    padding: 8px 10px !important;
    background: var(--input) !important;
    border-radius: 7px !important;
    color: var(--accent) !important;
    border: 1px solid var(--border) !important;
    word-break: break-all !important;
    line-height: 1.5 !important;
}

.__lf-meta-chips {
    display: flex !important;
    gap: 6px !important;
    margin-top: 6px !important;
    flex-wrap: wrap !important;
}

.__lf-chip {
    display: inline-flex !important;
    align-items: center !important;
    padding: 2px 8px !important;
    border-radius: 10px !important;
    font-size: 10px !important;
    font-weight: 600 !important;
    background: var(--pri-dim) !important;
    color: var(--primary-bright) !important;
}

.__lf-badge {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    min-width: 20px !important;
    height: 18px !important;
    padding: 0 6px !important;
    border-radius: 9px !important;
    font-size: 10px !important;
    font-weight: 700 !important;
    background: var(--pri-dim) !important;
    color: var(--primary-bright) !important;
}

/* ── Locator List ────────────────────────────────────────── */
.__lf-locator-list {
    flex: 1 !important;
    overflow-y: auto !important;
    padding: 6px 10px 10px !important;
    max-height: 300px !important;
}

.__lf-locator-list::-webkit-scrollbar {
    width: 5px;
}

.__lf-locator-list::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 3px;
}

.__lf-locator-item {
    padding: 8px 10px !important;
    margin-bottom: 6px !important;
    background: var(--surface) !important;
    border: 1px solid var(--border) !important;
    border-radius: 8px !important;
    transition: border-color 0.15s, background 0.15s !important;
}

.__lf-locator-item:hover {
    border-color: var(--primary) !important;
    background: var(--hover) !important;
}

.__lf-loc-header {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    margin-bottom: 4px !important;
}

/* Quality dots */
.__lf-dot {
    width: 8px !important;
    height: 8px !important;
    border-radius: 50% !important;
    flex-shrink: 0 !important;
}

.__lf-dot.__lf-best {
    background: var(--green) !important;
}

.__lf-dot.__lf-good {
    background: var(--yellow) !important;
}

.__lf-dot.__lf-ok {
    background: var(--orange) !important;
}

.__lf-dot.__lf-avoid {
    background: var(--red) !important;
}

/* Quality badges */
.__lf-rating {
    font-size: 9px !important;
    font-weight: 800 !important;
    text-transform: uppercase !important;
    padding: 1px 6px !important;
    border-radius: 4px !important;
    letter-spacing: 0.3px !important;
}

.__lf-rating.__lf-best {
    background: var(--green-dim) !important;
    color: var(--green) !important;
}

.__lf-rating.__lf-good {
    background: var(--yellow-dim) !important;
    color: var(--yellow) !important;
}

.__lf-rating.__lf-ok {
    background: var(--orange-dim) !important;
    color: var(--orange) !important;
}

.__lf-rating.__lf-avoid {
    background: var(--red-dim) !important;
    color: var(--red) !important;
}

.__lf-type {
    font-size: 10px !important;
    color: var(--muted) !important;
    flex: 1 !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
}

.__lf-copy-btn {
    width: 26px !important;
    height: 26px !important;
    border: none !important;
    background: transparent !important;
    cursor: pointer !important;
    border-radius: 5px !important;
    font-size: 12px !important;
    transition: background 0.15s, transform 0.1s !important;
    flex-shrink: 0 !important;
}

.__lf-copy-btn:hover {
    background: var(--pri-dim) !important;
    transform: scale(1.1) !important;
}

.__lf-loc-code {
    font-family: 'JetBrains Mono', 'Fira Code', Consolas, monospace !important;
    font-size: 11px !important;
    line-height: 1.5 !important;
    padding: 6px 8px !important;
    background: var(--input) !important;
    border-radius: 6px !important;
    color: var(--text) !important;
    word-break: break-all !important;
    cursor: pointer !important;
    border: 1px solid transparent !important;
    transition: border-color 0.15s, background 0.15s !important;
}

.__lf-loc-code:hover {
    border-color: var(--border) !important;
    background: var(--hover) !important;
}

.__lf-loc-footer {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    margin-top: 4px !important;
    font-size: 10px !important;
}

.__lf-valid {
    color: var(--green) !important;
}

.__lf-warn {
    color: var(--yellow) !important;
}

.__lf-err {
    color: var(--red) !important;
}

.__lf-reason {
    color: var(--muted) !important;
    flex: 1 !important;
    text-align: right !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

/* ── Scan Results (List All) ─────────────────────────────── */
.__lf-scan-actions {
    display: flex !important;
    gap: 6px !important;
    padding: 6px 14px !important;
    flex-wrap: wrap !important;
    border-bottom: 1px solid var(--border) !important;
}

.__lf-scan-list {
    flex: 1 !important;
    overflow-y: auto !important;
    padding: 6px 10px 10px !important;
    max-height: 320px !important;
}

.__lf-scan-list::-webkit-scrollbar {
    width: 5px;
}

.__lf-scan-list::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 3px;
}

.__lf-scan-row {
    padding: 6px 8px !important;
    margin-bottom: 4px !important;
    background: var(--surface) !important;
    border: 1px solid var(--border) !important;
    border-radius: 7px !important;
    transition: border-color 0.15s, background 0.15s !important;
}

.__lf-scan-row:hover {
    border-color: var(--primary) !important;
    background: var(--hover) !important;
}

.__lf-scan-row-header {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    cursor: pointer !important;
}

.__lf-scan-tag {
    font-family: 'JetBrains Mono', Consolas, monospace !important;
    font-size: 11px !important;
    color: var(--accent) !important;
    font-weight: 600 !important;
    flex-shrink: 0 !important;
}

.__lf-scan-text {
    flex: 1 !important;
    font-size: 11px !important;
    color: var(--dim) !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
}

.__lf-scan-num {
    font-size: 10px !important;
    color: var(--muted) !important;
    flex-shrink: 0 !important;
}

.__lf-scan-expand {
    width: 24px !important;
    height: 24px !important;
    border: none !important;
    background: transparent !important;
    color: var(--dim) !important;
    cursor: pointer !important;
    font-size: 14px !important;
    flex-shrink: 0 !important;
    border-radius: 5px !important;
    transition: background 0.15s !important;
}

.__lf-scan-expand:hover {
    background: var(--pri-dim) !important;
}

.__lf-scan-best-code {
    font-family: 'JetBrains Mono', Consolas, monospace !important;
    font-size: 10px !important;
    padding: 3px 6px !important;
    margin-top: 3px !important;
    background: var(--input) !important;
    border-radius: 4px !important;
    color: var(--dim) !important;
    word-break: break-all !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

.__lf-scan-detail {
    margin-top: 6px !important;
    padding-top: 6px !important;
    border-top: 1px solid var(--border) !important;
}

.__lf-scan-detail-row {
    display: flex !important;
    align-items: center !important;
    flex-wrap: wrap !important;
    gap: 5px !important;
    padding: 4px 0 !important;
}

.__lf-scan-detail-row .__lf-loc-code {
    width: 100% !important;
    font-size: 10px !important;
    padding: 3px 6px !important;
}

/* ── Log Panel ───────────────────────────────────────────── */
.__lf-log-section {
    border-top: 1px solid var(--border) !important;
    flex-shrink: 0 !important;
    max-height: 120px !important;
    overflow: hidden !important;
    display: flex !important;
    flex-direction: column !important;
}

.__lf-log-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 5px 14px !important;
    background: var(--surface) !important;
    cursor: pointer !important;
    flex-shrink: 0 !important;
}

.__lf-log-header:hover {
    background: var(--hover) !important;
}

.__lf-log-title {
    font-size: 10px !important;
    font-weight: 700 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.6px !important;
    color: var(--muted) !important;
}

.__lf-log-clear {
    font-size: 10px !important;
    color: var(--muted) !important;
    cursor: pointer !important;
    background: none !important;
    border: none !important;
    padding: 2px 6px !important;
    border-radius: 4px !important;
    font-family: 'Inter', system-ui, sans-serif !important;
    font-weight: 500 !important;
}

.__lf-log-clear:hover {
    color: var(--text) !important;
    background: var(--hover) !important;
}

.__lf-log-list {
    overflow-y: auto !important;
    padding: 4px 14px 6px !important;
    flex: 1 !important;
}

.__lf-log-list::-webkit-scrollbar {
    width: 4px;
}

.__lf-log-list::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 2px;
}

.__lf-log-entry {
    font-family: 'JetBrains Mono', Consolas, monospace !important;
    font-size: 10px !important;
    line-height: 1.6 !important;
    color: var(--dim) !important;
    padding: 1px 0 !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.02) !important;
}

.__lf-log-entry.__lf-log-info {
    color: var(--accent) !important;
}

.__lf-log-entry.__lf-log-warn {
    color: var(--yellow) !important;
}

.__lf-log-entry.__lf-log-error {
    color: var(--red) !important;
}

.__lf-log-time {
    color: var(--muted) !important;
    margin-right: 6px !important;
}

/* ── Empty State ─────────────────────────────────────────── */
.__lf-empty {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 10px !important;
    padding: 30px !important;
    color: var(--muted) !important;
    text-align: center !important;
    font-size: 13px !important;
}

/* ── Actions Bar ─────────────────────────────────────────── */
.__lf-actions {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    padding: 8px 14px !important;
    border-top: 1px solid var(--border) !important;
    background: var(--surface) !important;
    flex-shrink: 0 !important;
}

/* ── Toast ────────────────────────────────────────────────── */
.__lf-toast {
    position: absolute !important;
    bottom: 54px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    padding: 6px 18px !important;
    background: var(--green) !important;
    color: #fff !important;
    font-size: 12px !important;
    font-weight: 600 !important;
    border-radius: 20px !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3) !important;
    z-index: 10 !important;
    transition: opacity 0.25s ease !important;
}

.__lf-toast.__lf-hidden {
    opacity: 0 !important;
    pointer-events: none !important;
}